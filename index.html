<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>提詞器Teleprompter Pro</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Noto+Sans+TC:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#3b82f6">
    <link rel="apple-touch-icon" href="assets/icons/icon-192x192.png">
</head>

<body>
    <div class="app-container">
        <!-- 提詞顯示區 (Prompter Display) -->
        <main class="teleprompter-display" id="displayArea">
            <div class="scroll-wrapper" id="scrollWrapper">
                <div class="scroll-content" id="scrollContent">
                    <!-- 文字內容將由 JS 動態插入或同步 -->
                    <div class="text-placeholder">請在下方輸入文字...</div>
                </div>
            </div>
            <!-- 鏡像反轉提示 (可選) -->
            <div class="flip-indicator" id="flipIndicator">FLIPPED</div>

            <!-- 視線引導線 -->
            <div class="guide-line" id="guideLine"></div>

            <!-- 倒數計時遮罩 -->
            <div class="countdown-overlay" id="countdownOverlay">3</div>

            <!-- 全螢幕按鈕 -->
            <button id="btnFullscreen" class="btn-exit btn-fullscreen" title="全螢幕切換">⛶</button>
            <!-- 退出播放按鈕 -->
            <button id="btnExit" class="btn-exit" title="退出播放">✕</button>
        </main>

        <!-- 控制面板 (Control Panel) -->
        <aside class="control-panel">
            <div class="panel-header">
                <h1>提詞器 Teleprompter Pro</h1>
            </div>

            <div class="panel-content">
                <!-- 文字輸入區 -->
                <div class="control-group">
                    <div class="control-label-row">
                        <label for="scriptInput">提詞稿內容</label>
                        <div class="button-group">
                            <button type="button" id="btnPaste" class="btn-paste" title="貼上剪貼簿內容">
                                📋 貼上
                            </button>
                            <button type="button" id="btnClear" class="btn-clear" title="清除內容">
                                🗑️ 清除
                            </button>
                        </div>
                    </div>
                    <textarea id="scriptInput" placeholder="在此輸入或貼上演講稿..."></textarea>
                </div>

                <!-- 設定控制 -->
                <div class="settings-grid">
                    <div class="control-group">
                        <button id="btnPlayPause" class="btn primary">
                            <span class="icon">▶</span> 播放
                        </button>
                    </div>

                    <div class="control-group">
                        <label for="fontSelect">字體選擇</label>
                        <select id="fontSelect">
                            <option value="'Noto Sans TC', sans-serif">Noto Sans TC (預設)</option>
                            <option value="'Inter', sans-serif">Inter</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="'Microsoft JhengHei', sans-serif">微軟正黑體</option>
                            <option value="'PingFang TC', sans-serif">蘋方-繁</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="fontSizeSlider">字體大小 <span id="fontSizeDisplay">48px</span></label>
                        <input type="range" id="fontSizeSlider" min="20" max="150" value="48" step="2">
                    </div>

                    <div class="control-group">
                        <label for="speedSlider">滾動速度 <span id="speedDisplay">0</span></label>
                        <input type="range" id="speedSlider" min="0" max="100" value="3" step="1">
                    </div>

                    <div class="control-group">
                        <label for="marginSlider">左右邊距 <span id="marginDisplay">5%</span></label>
                        <input type="range" id="marginSlider" min="0" max="40" value="5" step="1">
                    </div>

                    <div class="control-group">
                        <label for="guideHeightSlider">引導線高度 <span id="guideHeightDisplay">50%</span></label>
                        <input type="range" id="guideHeightSlider" min="10" max="90" value="50" step="1">
                    </div>

                    <div class="control-group countdown-control">
                        <label for="countdownToggle" class="checkbox-label">
                            <span>倒數 3 秒</span>
                            <div class="toggle-switch">
                                <input type="checkbox" id="countdownToggle" checked>
                                <span class="slider round"></span>
                            </div>
                        </label>
                        </label>
                    </div>

                    <div class="control-group">
                        <label for="flipToggle" class="checkbox-label">
                            <span>上下反轉</span>
                            <div class="toggle-switch">
                                <input type="checkbox" id="flipToggle" checked>
                                <span class="slider round"></span>
                            </div>
                        </label>
                    </div>

                    <div class="control-group">
                        <label>📱 手機遙控</label>
                        <div class="qrcode-container" id="qrcodeContainer">
                            <div class="qrcode-loading">載入中...</div>
                        </div>
                        <div class="remote-url" id="remoteUrl"></div>
                        <div class="connection-info" id="connectionInfo">
                            <span class="ws-status" id="wsStatus">未連線</span>
                        </div>
                    </div>
                </div>

                <!-- 操作按鈕 (已移至上方或整合至 Grid) -->
                <div class="action-buttons" style="display: none;"></div>
            </div>

            <div class="panel-footer">
                <a href="https://github.com/mch000534/teleprompter_pro" target="_blank" class="github-link"
                    title="GitHub Repository">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-github">
                        <path
                            d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
                        </path>
                    </svg>
                    <span>GitHub</span>
                </a>
            </div>
        </aside>
    </div>

    <!-- 橫向螢幕警告 (置於 app-container 外，不受反轉影響) -->
    <div class="landscape-warning" id="landscapeWarning">
        <span class="icon">📱</span>
        <span class="message">播放已暫停</span>
        <span class="sub-message">請將手機鎖定為垂直方向後繼續使用</span>
    </div>

    <script src="assets/js/app.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then(registration => {
                        console.log('SW registered: ', registration);
                    }).catch(registrationError => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>

</html>